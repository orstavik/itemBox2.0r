<link rel="import" href="../../bower_components/paper-styles/shadow.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">

<dom-module id="fab-transformer">
  <template>
    <style>
      :host {
        display: flex;
        --fab-color: white;
        --fab-icon-color: black;
      }
      #fab {
        display: flex;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        position: relative;
        align-items: center;
        justify-content: center;
        background-color: var(--fab-color);
        @apply --shadow-elevation-4dp;
        @apply --shadow-transition;
        cursor: pointer;
      }
      :host([mini]) #fab {
        width: 40px;
        height: 40px;
      }
      :host([active]) #fab {
        background-color: grey;
      }
      iron-icon {
        color: var(--fab-icon-color);
      }
    </style>

    <div id="fab" on-tap="_toggle">
      <iron-icon icon$="[[icon]]"></iron-icon>
    </div>

    <div id="container">
      <slot></slot>
    </div>

  </template>
  <script>
    class FabTransformer extends Polymer.GestureEventListeners(Polymer.Element) {
      static get is() {
        return "fab-transformer";
      }

      static get properties() {
        return {
          active: {
            type: Boolean,
            reflectToAttribute: true,
            value: false
          },
          icon: String
        }
      }

      connectedCallback() {
        super.connectedCallback();
      }

      _toggle() {
        if (!this.active)
          return this._activate();
        return this.deactivate();
      }

      _activate() {
        this.active = true;
        this.fire("fab-transformer-activated");
      }

      deactivate() {
        this.active = false;
      }

      fire(name, detail) {
        this.dispatchEvent(new CustomEvent(name, {composed: true, bubbles: true, detail: detail}));
      }
    }
    customElements.define(FabTransformer.is, FabTransformer);
  </script>
</dom-module>